{% extends "base2.html" %}

{% block content %}
<!DOCTYPE html>
<html lang="en">

</head>
<body>

    <h1>Create a Pet Adoption Listing</h1>
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div>
            <label for="image">Upload Image</label>
            <input type="file" id="image" name="image" accept="image/*">
        </div>

        <div>
            <label for="title">Pet's Name</label>
            <input type="text" id="title" name="title" placeholder="Enter pet's name" required>
        </div>

        <div>
            <label for="description">Description</label>
            <textarea id="description" name="description" placeholder="Write a description" required></textarea>
        </div>

        <div>
            <label for="age">Age</label>
            <input type="number" id="age" name="age" placeholder="Enter pet's age" required>
        </div>

        <div>
            <label for="food_habit">Food Habit</label>
            <input type="text" id="food_habit" name="food_habit" placeholder="Enter food habit" required>
        </div>

        <div>
            <label for="potty_trained">Potty Trained</label>
            <select id="potty_trained" name="potty_trained" required>
                <option value="True">Yes</option>
                <option value="False">No</option>
            </select>
        </div>

        <div>
            <label for="breed">Breed</label>
            <input type="text" id="breed" name="breed" placeholder="Enter pet's breed" required>
        </div>

        <div>
            <label for="gender">Gender</label>
            <select id="gender" name="gender" required>
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>
        </div>

        <div>
            <button type="submit">Create Listing</button>
        </div>
    </form>



        
            <!-- Preview Content -->
            <div class="preview-content">
                <h5>Your Listing Preview</h5>
                <div class="img-preview-container" id="img-preview">
                    <span>No image uploaded yet.</span>
                </div>
                <h5 id="preview-title"></h5>
                <p id="preview-age"></p>
                <p><strong>Food Habit:</strong> <span id="preview-food-habit"></span></p>
                <p><strong>Potty Trained:</strong> <span id="preview-potty-trained"></span></p>
                <p><strong>Breed:</strong> <span id="preview-breed"></span></p>
                <p><strong>Gender:</strong> <span id="preview-gender"></span></p>
                <p><strong>Description:</strong> <span id="preview-description"></span></p>
            </div>

        </div>
    </div>

    <script>
        const titleField = document.getElementById('id_title');
        const ageField = document.getElementById('id_age');
        const foodHabitField = document.getElementById('id_food_habit');
        const pottyTrainedField = document.getElementById('id_potty_trained');
        const breedField = document.getElementById('id_breed');
        const genderField = document.getElementById('id_gender');
        const descriptionField = document.getElementById('id_description');
        const imgPreview = document.getElementById('img-preview');

        function updatePreview() {
            document.getElementById('preview-title').textContent = titleField.value;
            document.getElementById('preview-age').textContent = `Age: ${ageField.value} years`;
            document.getElementById('preview-food-habit').textContent = foodHabitField.value;
            document.getElementById('preview-potty-trained').textContent = pottyTrainedField.checked ? 'Yes' : 'No';
            document.getElementById('preview-breed').textContent = breedField.value;
            document.getElementById('preview-gender').textContent = genderField.options[genderField.selectedIndex].text;
            document.getElementById('preview-description').textContent = descriptionField.value;
        }

        function previewImage() {
            const file = document.getElementById('id_image').files[0];
            const reader = new FileReader();

            reader.onloadend = function () {
                imgPreview.innerHTML = `<img src="${reader.result}" alt="Image preview" />`;
            }

            if (file) {
                reader.readAsDataURL(file);
            } else {
                imgPreview.innerHTML = `<span>No image uploaded yet.</span>`;
            }
        }

        titleField.addEventListener('input', updatePreview);
        ageField.addEventListener('input', updatePreview);
        foodHabitField.addEventListener('input', updatePreview);
        pottyTrainedField.addEventListener('change', updatePreview);
        breedField.addEventListener('input', updatePreview);
        genderField.addEventListener('change', updatePreview);
        descriptionField.addEventListener('input', updatePreview);
        document.getElementById('id_image').addEventListener('change', previewImage); // <-- This line fixes it
    </script>

</body>
</html>
{% endblock %}

