{% extends "base2.html" %}
{% load static %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create Listing</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <style>
        body {
            font-family: 'Georgia', serif;
        }

        /* Main content styling */
        .main-content { 
            display: flex; 
            justify-content: space-between; 
            padding: 15px; 
            margin-left: 220px; /* Sidebar width */
        }

        .sidebar-content {
            width: 30%;
        }

        .preview-content {
            width: 60%;
        }

        .form-control, .form-select {
            border: 1px solid #d9b27f;
            margin-bottom: 10px; /* Reduced gap between form fields */
            padding: 8px 12px;
        }

        .mb-3 {
            margin-bottom: 10px; /* Reduce bottom margin for form fields */
        }

        /* Smaller Description Box */
        #id_description {
            height: 50px;  /* Half the original height */
            resize: vertical;  /* Allow resizing only vertically */
        }

        /* Preview Box styling */
        .preview-box {
            border: 2px dashed #ba8c63;
            padding: 20px;
            border-radius: 15px;
            min-height: 400px;
        }

        .img-preview-container {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border: 2px dashed #ba8c63;
            padding: 10px;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .img-preview-container img {
            max-width: 100%;
            max-height: 100%;
            border-radius: 10px;
        }
    </style>
</head>
<body>

    <!-- Main Content Area -->
    <div class="main-content">

        <!-- Sidebar Content -->
        <div class="sidebar-content">
            <h4>ðŸ“š Book for Sale</h4>
            <form method="POST" enctype="multipart/form-data" id="listingForm" action="{% url 'create_listing' %}">
                {% csrf_token %}
                <div class="mb-3">
                    <label for="{{ form.image.id_for_label }}" class="form-label">Upload Image</label>
                    {{ form.image }}
                </div>

                <div class="mb-3">
                    <label for="{{ form.title.id_for_label }}" class="form-label">Title</label>
                    {{ form.title }}
                </div>

                <div class="mb-3">
                    <label for="{{ form.author.id_for_label }}" class="form-label">Author Name</label>
                    {{ form.author }}
                </div>

                <div class="mb-3">
                    <label for="{{ form.price.id_for_label }}" class="form-label">Price</label>
                    {{ form.price }}
                </div>

                <div class="mb-3">
                    <label for="{{ form.condition.id_for_label }}" class="form-label">Condition</label>
                    {{ form.condition }}
                </div>

                <div class="mb-3">
                    <label for="{{ form.description.id_for_label }}" class="form-label">Description</label>
                    {{ form.description }}
                </div>

                <button type="submit" class="btn btn-dark mt-3">Add Listing</button>
            </form>
        </div>

        <!-- Preview Content -->
        <div class="preview-content">
            <div class="preview-box text-center">
                <h4>Your Listing Preview</h4>
                <p class="text-muted">As you create your listing, preview how it will appear to others.</p>
                <div id="preview-content">
                    <div class="img-preview-container" id="img-preview">
                        <span>No image uploaded yet.</span>
                    </div>
                    <h5 id="preview-title"></h5>
                    <p id="preview-author"></p>
                    <p id="preview-description"></p>
                    <strong id="preview-price"></strong><br>
                    <em id="preview-condition"></em>
                </div>
            </div>
        </div>
    </div>

    <script>
        const titleField = document.getElementById('id_title');
        const priceField = document.getElementById('id_price');
        const authorField = document.getElementById('id_author');
        const conditionField = document.getElementById('id_condition');
        const descriptionField = document.getElementById('id_description');
        const imgPreview = document.getElementById('img-preview');
    
        function updatePreview() {
            document.getElementById('preview-title').textContent = titleField.value;
            document.getElementById('preview-description').textContent = descriptionField.value;
            document.getElementById('preview-author').textContent = authorField.value;
            document.getElementById('preview-price').textContent = priceField.value + ' BDT';
            document.getElementById('preview-condition').textContent = conditionField.options[conditionField.selectedIndex].text;
        }
    
        function previewImage() {
            const file = document.getElementById('id_image').files[0];
            const reader = new FileReader();
    
            reader.onloadend = function () {
                imgPreview.innerHTML = `<img src="${reader.result}" alt="Image preview" />`;
            }
    
            if (file) {
                reader.readAsDataURL(file);
            } else {
                imgPreview.innerHTML = `<span>No image uploaded yet.</span>`;
            }
        }
    
        titleField.addEventListener('input', updatePreview);
        priceField.addEventListener('input', updatePreview);
        authorField.addEventListener('input', updatePreview);
        conditionField.addEventListener('change', updatePreview);
        descriptionField.addEventListener('input', updatePreview);
        document.getElementById('id_image').addEventListener('change', previewImage);
    </script>

</body>
</html>
{% endblock %}



